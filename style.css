/* === STRIPPED DOWN STYLE - FIXED === */
:root {
    --color-primary: #515E79;
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-dark: #1e293b;
    --border-light: #e2e8f0;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-inverse: #ffffff;
    --shadow-md: 0 2px 4px rgba(0,0,0,0.1);
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 0.9375rem;
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 0.75rem;
    --space-lg: 1rem;
    --space-xl: 1.25rem;
    --z-sticky: 200;
    --z-modal: 400;
    --z-toast: 500;
}

.dark-mode {
    --bg-primary: #101419;
    --bg-secondary: #1C222C;
    --bg-tertiary: #334155;
    --border-light: #475569;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --text-inverse: #DFDEDE;
}

* { 
    margin:0; 
    padding:0; 
    box-sizing:border-box; 
    -webkit-tap-highlight-color:transparent; 
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.4;
    min-height: 100vh;
    font-size: var(--text-base);
}

.app-container { 
    display:flex; 
    flex-direction:column; 
    min-height:100vh; 
}

.header {
    background: var(--bg-primary); 
    border-bottom:1px solid var(--border-light);
    padding: var(--space-md) var(--space-lg); 
    position:sticky; 
    top:0; 
    z-index:var(--z-sticky);
    display:flex; 
    align-items:center; 
    justify-content:space-between;
    padding-top: max(var(--space-md), env(safe-area-inset-top));
}

.date-display { 
    font-weight:500; 
    font-size:var(--text-sm); 
    color:var(--text-secondary); 
    cursor:pointer; 
    padding:var(--space-sm) var(--space-md); 
    border-radius:var(--radius-md); 
}

.date-display:hover { 
    background:var(--bg-secondary); 
}

.icon-btn { 
    width:36px; 
    height:36px; 
    border-radius:var(--radius-md); 
    border:none; 
    background:transparent; 
    color:var(--text-secondary); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    cursor:pointer; 
}

.icon-btn:hover { 
    background:var(--bg-secondary); 
    color:var(--text-primary); 
}

.sidebar { 
    display:none; 
    width:64px; 
    background:var(--bg-primary); 
    border-right:1px solid var(--border-light); 
    position:fixed; 
    left:0; 
    top:0; 
    bottom:0; 
    z-index:var(--z-sticky); 
    padding-top:60px; 
}

.sidebar-items { 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    gap:var(--space-sm); 
    padding:var(--space-lg) 0; 
}

.sidebar-item { 
    width:40px; 
    height:40px; 
    border-radius:var(--radius-md); 
    border:none; 
    background:transparent; 
    color:var(--text-secondary); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    cursor:pointer; 
    font-size:1.25rem; 
}

.sidebar-item:hover { 
    background:var(--bg-tertiary); 
}

.sidebar-item.active { 
    background:var(--color-primary); 
    color:var(--text-inverse); 
}

.bottom-nav { 
    background:var(--bg-primary); 
    border-top:1px solid var(--border-light); 
    padding:var(--space-sm) var(--space-lg); 
    padding-bottom:max(var(--space-sm), env(safe-area-inset-bottom)); 
    position:fixed; 
    bottom:0; 
    left:0; 
    right:0; 
    z-index:var(--z-sticky); 
    display:none; 
}

.bottom-nav-items { 
    display:flex; 
    justify-content:space-around; 
}

.nav-item { 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    gap:2px; 
    background:none; 
    border:none; 
    color:var(--text-secondary); 
    padding:var(--space-sm); 
    font-size:var(--text-xs); 
    cursor:pointer; 
}

.nav-item.active { 
    color:var(--color-primary); 
}

.nav-item i { 
    font-size:1.25rem; 
}

.main-content { 
    flex:1; 
    padding:var(--space-lg); 
    padding-bottom:max(80px, var(--space-lg) + env(safe-area-inset-bottom)); 
    width:100%; 
    max-width:1200px; 
    margin:0 auto; 
}

.view-container { 
    display:none; 
    width:100%; 
}

.view-container.active { 
    display:block; 
    animation:fadeIn 0.25s ease; 
}

@keyframes fadeIn { 
    from { opacity:0.8; } 
    to { opacity:1; } 
}

/* --- flow view --- */
.rhythm-header {
    padding: 8px; 
    background: var(--bg-secondary); 
    margin: 8px 0 2px 0;
    border-radius: var(--radius-sm); 
    font-size: 0.9rem; 
    color: var(--text-secondary);
    border-left: 3px solid var(--color-primary);
}

.time-grid { 
    display:grid; 
    gap:1px; 
    background:#263138; 
    border-radius:var(--radius-md); 
    overflow:hidden; 
}

.time-block { 
    display:flex; 
    align-items:center; 
    gap:var(--space-md); 
    padding:var(--space-md); 
    background:var(--bg-primary); 
    cursor:pointer; 
    min-height:56px; 
}

.time-block:hover { 
    background:var(--bg-secondary); 
}

.time-block.current { 
    background:var(--color-primary); 
    color:var(--text-inverse); 
}

.time-block.locked { 
    opacity:0.7; 
}

.time-label { 
    font-size:var(--text-sm); 
    color:var(--text-secondary); 
    min-width:70px; 
}

.time-block.current .time-label { 
    color:var(--text-inverse); 
}

.block-content { 
    flex:1; 
}

.block-title { 
    font-weight:500; 
}

.task-count { 
    font-size:0.8rem; 
    color:var(--text-secondary); 
    margin-left:var(--space-sm); 
}

/* --- calendar --- */
.calendar-header { 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    margin-bottom:var(--space-lg); 
}

.month-nav { 
    display:flex; 
    align-items:center; 
    gap:var(--space-sm); 
}

.month-year { 
    font-weight:600; 
    min-width:140px; 
    text-align:center; 
}

.calendar-grid { 
    background:var(--bg-primary); 
    border:1px solid var(--border-light); 
    border-radius:var(--radius-lg); 
    overflow:hidden; 
}

.weekdays { 
    display:grid; 
    grid-template-columns:repeat(7,1fr); 
    background:var(--bg-secondary); 
    border-bottom:1px solid var(--border-light); 
}

.weekday { 
    padding:var(--space-md); 
    text-align:center; 
    font-size:var(--text-xs); 
    color:var(--text-secondary); 
}

.calendar-days { 
    display:grid; 
    grid-template-columns:repeat(7,1fr); 
}

.calendar-day { 
    min-height:70px; 
    border:1px solid var(--border-light); 
    padding:4px; 
    cursor:pointer; 
    background:var(--bg-primary); 
    position:relative; 
}

.calendar-day:hover { 
    background:var(--bg-secondary); 
}

.calendar-day.today { 
    background:var(--color-primary); 
    color:var(--text-inverse); 
}

.calendar-day.past { 
    opacity:0.6; 
}

.calendar-day.other-month { 
    opacity:0.4; 
}

.day-number { 
    font-size:var(--text-sm); 
    font-weight:500; 
}

.day-task-count { 
    font-size:10px; 
    color:var(--text-secondary); 
    margin-top:2px; 
}

.calendar-day.today .day-task-count { 
    color:var(--text-inverse); 
}

.day-add-btn { 
    position:absolute; 
    bottom:2px; 
    right:2px; 
    width:22px; 
    height:22px; 
    border-radius:50%; 
    background:var(--color-primary); 
    color:white; 
    border:none; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    cursor:pointer; 
    font-size:12px; 
    opacity:0; 
    transition:opacity 0.1s; 
}

.calendar-day:hover .day-add-btn { 
    opacity:1; 
}

/* --- notes --- */
.data-section { 
    background:var(--bg-primary); 
    border:1px solid var(--border-light); 
    border-radius:var(--radius-lg); 
    padding:var(--space-lg); 
}

.section-header { 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    margin-bottom:var(--space-lg); 
    padding-bottom:var(--space-sm); 
    border-bottom:1px solid var(--border-light); 
}

.section-title { 
    display:flex; 
    align-items:center; 
    gap:var(--space-sm); 
    font-weight:600; 
}

.btn { 
    padding:8px 16px; 
    border-radius:var(--radius-md); 
    border:none; 
    font-weight:500; 
    font-size:var(--text-sm); 
    cursor:pointer; 
    background:var(--color-primary); 
    color:var(--text-inverse); 
}

.btn-small { 
    padding:6px 12px; 
    font-size:var(--text-xs); 
}

.btn-secondary { 
    background:var(--bg-tertiary); 
    color:var(--text-primary); 
    border:1px solid var(--border-light); 
}

.notes-list { 
    display:flex; 
    flex-direction:column; 
    gap:var(--space-md); 
}

.note-item { 
    padding:var(--space-md); 
    background:var(--bg-secondary); 
    border-radius:var(--radius-md); 
    border-left:3px solid var(--color-primary); 
    cursor:pointer; 
}

.note-content { 
    font-size:var(--text-sm); 
    margin-bottom:var(--space-sm); 
}

.note-meta { 
    font-size:var(--text-xs); 
    color:var(--text-secondary); 
}

/* --- modal --- */
.modal { 
    position:fixed; 
    top:0; 
    left:0; 
    right:0; 
    bottom:0; 
    background:rgba(0,0,0,0.5); 
    display:none; 
    align-items:center; 
    justify-content:center; 
    z-index:var(--z-modal); 
    padding:var(--space-lg); 
}

.modal.active { 
    display:flex; 
}

.modal-content { 
    background:var(--bg-secondary); 
    border-radius:var(--radius-lg); 
    width:100%; 
    max-width:500px; 
    max-height:90vh; 
    overflow-y:auto; 
}

.modal-header { 
    padding:var(--space-lg); 
    border-bottom:1px solid var(--border-light); 
    display:flex; 
    justify-content:space-between; 
}

.modal-title { 
    font-weight:600; 
}

.modal-body { 
    padding:var(--space-lg); 
}

.modal-actions { 
    padding:var(--space-lg); 
    border-top:1px solid var(--border-light); 
    display:flex; 
    justify-content:flex-end; 
    gap:var(--space-md); 
}

.form-group { 
    margin-bottom:var(--space-md); 
}

.form-label { 
    display:block; 
    margin-bottom:var(--space-xs); 
    font-size:var(--text-sm); 
    color:var(--text-secondary); 
}

.form-input { 
    width:100%; 
    padding:10px; 
    border:1px solid var(--border-light); 
    border-radius:var(--radius-md); 
    background:var(--bg-primary); 
    color:var(--text-primary); 
}

.form-textarea { 
    min-height:80px; 
    resize:vertical; 
}

.info-row { 
    display:flex; 
    margin-bottom:var(--space-md); 
    padding:var(--space-sm) 0; 
    border-bottom:1px solid var(--border-light); 
}

.info-label { 
    width:100px; 
    color:var(--text-secondary); 
}

.info-value { 
    flex:1; 
    font-weight:500; 
}

.status-badge { 
    display:inline-block; 
    padding:4px 12px; 
    border-radius:16px; 
    font-size:var(--text-xs); 
    background:var(--bg-tertiary); 
}

.status-badge.completed { 
    background:var(--color-primary); 
    color:white; 
}

/* --- toast --- */
.toast { 
    position:fixed; 
    bottom:100px; 
    left:50%; 
    transform:translateX(-50%); 
    background:var(--bg-dark); 
    color:white; 
    padding:var(--space-md) var(--space-lg); 
    border-radius:var(--radius-lg); 
    z-index:var(--z-toast); 
    display:none; 
    box-shadow:var(--shadow-md); 
}

.toast.show { 
    display:block; 
    animation:slideUp 0.3s ease; 
}

@keyframes slideUp { 
    from { transform: translate(-50%, 20px); opacity:0; } 
    to { transform: translate(-50%, 0); opacity:1; } 
}

/* Install prompt */
.install-prompt { 
    position:fixed; 
    bottom:100px; 
    left:50%; 
    transform:translateX(-50%); 
    background:var(--color-primary); 
    color:white; 
    padding:12px 20px; 
    border-radius:30px; 
    display:flex; 
    align-items:center; 
    gap:12px; 
    z-index:1000; 
}

.install-prompt button { 
    background:white; 
    color:var(--color-primary); 
    border:none; 
    padding:6px 16px; 
    border-radius:20px; 
    cursor:pointer; 
}

.install-prompt .close-btn { 
    background:transparent; 
    color:white; 
    padding:4px 8px; 
}

.loading-spinner { 
    width:40px; 
    height:40px; 
    border:3px solid var(--border-light); 
    border-top-color:var(--color-primary); 
    border-radius:50%; 
    animation:spin 1s linear infinite; 
}

@keyframes spin { 
    to { transform:rotate(360deg); } 
}

.empty-state { 
    text-align:center; 
    padding:var(--space-xl); 
    color:var(--text-secondary); 
}

@media (min-width:768px) { 
    .app-container { 
        padding-left:64px; 
    } 
    .sidebar { 
        display:block; 
    } 
    .bottom-nav { 
        display:none; 
    } 
}

@media (max-width:767px) { 
    .bottom-nav { 
        display:block; 
    } 
    .main-content { 
        padding-bottom:max(80px, var(--space-md) + env(safe-area-inset-bottom)); 
    } 
    .calendar-day { 
        min-height:60px; 
    }
    .day-add-btn { 
        opacity:1; 
    }
}